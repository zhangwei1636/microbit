Input/Output Pins 输入输出引脚
*****************

.. py:module:: microbit

The pins are your board's way to communicate with external devices connected to
it. There are 19 pins for your disposal, numbered 0-16 and 19-20. Pins 17 and
18 are not available.

引脚是您的电路板与连接到它的外部设备进行通信的方式。 有19个针脚供您处理，编号为0-16和19-20。 引脚17和18不可用。

For example, the script below will change the display on the micro:bit
depending upon the digital reading on pin 0::

例如，下面的脚本将根据引脚0上读取的数字更改micro：bit上的显示：

    from microbit import *


    while True:
        if pin0.read_digital():
            display.show(Image.HAPPY)
        else:
            display.show(Image.SAD)


Pin Functions 引脚功能
=============

.. image:: pinout.png

Those pins are available as attributes on the ``microbit``
module:``microbit.pin0`` - ``microbit.pin20``.

这些引脚可用作microbit模块的属性：microbit.pin0  -  microbit.pin20。

+-----+---------+----------+
| Pin | Type    | Function |
+=====+=========+==========+
|  0  | Touch   | Pad 0    |
+-----+---------+----------+
|  1  | Touch   | Pad 1    |
+-----+---------+----------+
|  2  | Touch   | Pad 2    |
+-----+---------+----------+
|  3  | Analog  | Column 1 |
+-----+---------+----------+
|  4  | Analog  | Column 2 |
+-----+---------+----------+
|  5  | Digital | Button A |
+-----+---------+----------+
|  6  | Digital | Row 2    |
+-----+---------+----------+
|  7  | Digital | Row 1    |
+-----+---------+----------+
|  8  | Digital |          |
+-----+---------+----------+
|  9  | Digital | Row 3    |
+-----+---------+----------+
|  10 | Analog  | Column 3 |
+-----+---------+----------+
|  11 | Digital | Button B |
+-----+---------+----------+
|  12 | Digital |          |
+-----+---------+----------+
|  13 | Digital | SPI MOSI |
+-----+---------+----------+
|  14 | Digital | SPI MISO |
+-----+---------+----------+
|  15 | Digital | SPI SCK  |
+-----+---------+----------+
|  16 | Digital |          |
+-----+---------+----------+
+-----+---------+----------+
|  19 | Digital | I2C SCL  |
+-----+---------+----------+
|  20 | Digital | I2C SDA  |
+-----+---------+----------+

The above table summarizes the pins available, their types (see below) and what
they are internally connected to.

上表总结了可用的引脚、它们的类型以及它们内部连接的功能。


Pulse-Width Modulation 脉宽调制
----------------------

The pins of your board cannot output analog signal the way an audio amplifier
can do it -- by modulating the voltage on the pin. Those pins can only either
enable the full 3.3V output, or pull it down to 0V. However, it is still
possible to control the brightness of LEDs or speed of an electric motor, by
switching that voltage on and off very fast, and controlling how long it is on
and how long it is off. This technique is called Pulse-Width Modulation (PWM),
and that's what the ``write_analog`` method below does.

电路板的引脚不能像音频放大器那样通过调制引脚上的电压输出模拟信号。 这些引脚只能3.3V输出，或者输出0V。 然而，通过非常快速地接通和断开电压，以及控制其开启时间和关闭时间，仍然可以控制LED的亮度或电机的速度。 这种技术称为脉冲宽度调制（PWM），这就是下面的write_analog方法的功能。

.. image:: pwm.png

Above you can see the diagrams of three different PWM signals. All of them have
the same period (and thus frequency), but they have different duty cycles.

上面可以看到三个不同的PWM信号的图表。它们都有相同的周期（相同频率），但它们有不同的占空比。

The first one would be generated by ``write_analog(511)``, as it has exactly
50% duty -- the power is on half of the time, and off half of the time. The
result of that is that the total energy of this signal is the same, as if it
was 1.65V instead of 3.3V.

第一个是由write_analog(511)产生的，因为它正好有50%的占空比――一半时间通电，一半时间断电。其结果是，这个信号的总能量是相同的，好像它是1.65V而不是3.3V。

The second signal has 25% duty cycle, and could be generated with
``write_analog(255)``. It has similar effect as if 0.825V was being output on
that pin.
第二个信号有25%的占空比，可以用write_analog(255)产生。它的效果类似于在该引脚上输出0.825伏。

The third signal has 75% duty cycle, and can be generated with
``write_analog(767)``. It has three times as much energy, as the second signal,
and is equivalent to outputting 2.475V on th pin.

第三个信号具有75％的占空比，并且可以使用write_analog（767）生成。 它的能量是第二个信号的三倍，相当于在第二个引脚上输出2.475V。

Note that this works well with devices such as motors, which have huge inertia
by themselves, or LEDs, which blink too fast for the human eye to see the
difference, but will not work so good with generating sound waves. This board
can only generate square wave sounds on itself, which sound pretty much like
the very old computer games -- mostly because those games also only could do
that.

请注意，这种方法很好地应用于诸如电机（电机本身具有巨大的惯性）或者LED，它们的闪烁速度太快，人类的眼睛看不到差异，但在产生声波方面效果不佳。这个板本身只能产生方波声音，这听起来很像非常古老的电脑游戏-主要是因为这些游戏也只能做到这一点。


Classes
=======

There are three kinds of pins, differing in what is available for them. They
are represented by the classes listed below. Note that they form a hierarchy,
so that each class has all the functionality of the previous class, and adds
its own to that.

有三种引脚，有不同的应用。 它们由下面列出的类表示。 请注意，它们形成一个层次结构，因此每个类都具有上一层类的所有功能，并将其自已的特性添加到该类中。

.. note::

注意：
    Those classes are not actually available for the user, you can't create
    new instances of them. You can only use the instances already provided,
    representing the physical pins on your board.

    这些类实际上用户不能用，您不能创建它们的新实例。您只能使用已经提供的实例，表示板上的物理引脚。

.. py:class:: MicroBitDigitalPin

    .. py:method:: read_digital()

        Return 1 if the pin is high, and 0 if it's low.

        返回1表示高电平，返回0表示低电平。

    .. py:method:: write_digital(value)

        Set the pin to high if ``value`` is 1, or to low, if it is 0.

        value为1时设置引脚为高电平，value为0时设置引脚为低电平。

    .. py:method::set_pull(value)

        Set the pull state to one of three possible values: ``pin.PULL_UP``,
        ``pin.PULL_DOWN`` or ``pin.NO_PULL`` (where ``pin`` is an instance of
        a pin). See below for discussion of default pull states.

        将pull状态设置为三个可能值之一：“pin.PULL_UP”、“pin.PULL_DOWN”
        或“pin.NO_PULL”（其中“pin”是一个pin对象的实例）。有关默认PULL状态的讨论，请
        参见下文。




    .. py:method::get_pull()

        Returns the pull configuration on a pin, which can be one of three
        possible values: ``NO_PULL``, ``PULL_DOWN``, or ``PULL_UP``. These
        are set using the ``set_pull()`` method or automatically configured
        when a pin mode requires it.

        返回引脚的pull值：NO_PULL、PULL_DOWN或PULL_UP。这些值由set_pull（）方法或自动配置。

    .. py:method::get_mode()

        Returns the pin mode. When a pin is used for a specific function, like
        writing a digital value, or reading an analog value, the pin mode
        changes. Pins can have one of the following modes: ``MODE_UNUSED``,
        ``MODE_WRITE_ANALOG``, ``MODE_READ_DIGITAL``, ``MODE_WRITE_DIGITAL``,
        ``MODE_DISPLAY``, ``MODE_BUTTON``, ``MODE_MUSIC``, ``MODE_AUDIO_PLAY``,
        ``MODE_TOUCH``, ``MODE_I2C``, ``MODE_SPI``.

        返回引脚的模式。当引脚作为特定的功能如：写一个数字值或读一个模拟值时，模式会改变。引脚有以下模式：MODE_UNUSED、MODE_WRITE_ANALOG、MODE_READ_DIGITAL、MODE_WRITE_DIGITAL、MODE_DISPLAY、MODE_BUTTON、MODE_MUSIC、MODE_AUDIO_PLAY、MODE_TOUCH、MODE_TOUCH、MODE_SPI。


.. py:class:: MicroBitAnalogDigitalPin

    .. py:method:: read_analog()

        Read the voltage applied to the pin, and return it as an integer
        between 0 (meaning 0V) and 1023 (meaning 3.3V).

        读引脚电压，返回0（表示0V）到1023（表示3.3V）之间的整数。


    .. py:method:: write_analog(value)

        Output a PWM signal on the pin, with the duty cycle proportional to
        the provided ``value``. The ``value`` may be either an integer or a
        floating point number between 0 (0% duty cycle) and 1023 (100% duty).

        在引脚上输出PWM信号，占空比与输入的value成比例。 value可以是0（0％占空比）和1023（100％占空比）之间的整数或浮点数。

    .. py:method:: set_analog_period(period)

        Set the period of the PWM signal being output to ``period`` in
        milliseconds. The minimum valid value is 1ms.

        设置输出PWM信号的周期值为period，单位为毫秒。最小值为1ms。

    .. py:method:: set_analog_period_microseconds(period)

        Set the period of the PWM signal being output to ``period`` in
        microseconds. The minimum valid value is 256碌s.

        设置输出PWM信号的周期值为period，单位为微秒。最小值为256us。


.. py:class:: MicroBitAnalogDigitalPin

    .. py:method:: read_analog()

        Read the voltage applied to the pin, and return it as an integer
        between 0 (meaning 0V) and 1023 (meaning 3.3V).

        读引脚的电压，返回0（表示0V）和1023（表示3.3V）之间的整数值。


.. py:class:: MicroBitTouchPin

    .. py:method:: is_touched()

        Return ``True`` if the pin is being touched with a finger, otherwise
        return ``False``.

        当手指按在引脚上时返回“True”，否则返回“False”。

        This test is done by measuring how much resistance there is between the
        pin and ground.  A low resistance gives a reading of ``True``.  To get
        a reliable reading using a finger you may need to touch the ground pin
        with another part of your body, for example your other hand.

        这个测试是通过测量引脚和接地点之间的电阻来完成的。低电阻表示“True”。要获得可靠的读数，您可能需要用身体的另一部分（例如另一只手）来接触接引脚地。


The pull mode for a pin is automatically configured when the pin changes to an
input mode. Input modes are when you call ``read_analog`` / ``read_digital`` /
``is_touched``. The default pull mode for these is, respectively, ``NO_PULL``,
``PULL_DOWN``, ``PULL_UP``. Calling ``set_pull`` will configure the pin to be
in ``read_digital`` mode with the given pull mode.

当引脚变为输入模式时，引脚会自动配置为拉模式。 输入模式是指调用read_analog / read_digital / is_touched时。 它们的默认拉模式分别为NO_PULL、PULL_DOWN、PULL_UP。 调用set_pull可以将拉模式的引脚配置为read_digital模式。


.. note::

注意：
    The micro:bit has external weak (10M) pull-ups fitted on pins
    0, 1 and 2 only, in order for the touch sensing to work.

    micro：bit仅在引脚0,1和2上安装了外部弱（10M）上拉电阻，以便触摸感应工作。

    There are also external (10k) pull-ups fitted on pins 5 and 11, in order
    for buttons A and B to work.

    在引脚5和11上也安装了（10K）上拉电阻，以使按钮A和B工作。

    GPIO pins are also used for the display. 6 of these are routed to the
    edge connector at 3, 4, 6, 7, 9. and 10. If you want to use these pins
    for another purpose, you may need to turn the `display off
    <https://microbit-micropython.readthedocs.io/en/latest/display.html#microbit.display.off>`_.

    GPIO引脚也用于显示。 其中的6个连接到3,4,6,7,9和10的边缘连接器。如果要将这些引脚用于其他目的，可能需要关闭显示器。

    See the `edge connector data sheet

    <http://tech.microbit.org/hardware/edgeconnector_ds>`_.

    可查看“edge connector data sheet”。
